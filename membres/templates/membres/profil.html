{% extends "base.html" %}
{% load static %}

{% block head %}{{ block.super }}

<title>EDEM - Profil</title>
<link rel="stylesheet" href="{% get_static_prefix %}css/membres.css" >
<link rel="stylesheet" href="{% get_static_prefix %}css/mandats.css" >

{% endblock head %}



{% block content %} {{ block.super }}

<div class="profil {% if user == membre %}editable{% endif %}">
	<div class="clearfix text-center">
		<h1>{{ membre.profil.nom_courant }}</h1>
		<div class="editable profile-picture">
			{% load gravatar %}
			{% if user == membre %}
			<div class="gravatar-edit">
				<p>Votre avatar est géré par <strong>Gravatar</strong>.</p>
				<p>Il dépend de votre adresse mail.</p>
				<p>Pour modifier votre avatar, cliquez <a href="{% gravatar_profile_url user.email %}">ici</a>.</p>
			</div>{% endif %}
			<img class="gravatar img-responsive center-block" src="{% gravatar_url membre.email 128 %}" />
		</div>
	</div>
	<div class="profil-body">
		<div class="bio">
			<input id="profil-bio" class="spoiler" type="checkbox"/>
			<div class="public">
				{% if profil.bio %}
					<p class="bio-content">{{ profil.bio}}</p>
				{% endif%}
			</div>
			{% if user == membre %}
			<form class="pas-public" method="POST" action="" enctype="multipart/form-data">
				<div class="form-group">
					{% csrf_token %}
					<textarea id="bio-input" name="bio" class="form-control" maxlength="255"
					placeholder="Mon message de présentation...">{{ profil.bio }}</textarea>
				</div>
				<div class="form-group">
					<button class="btn btn-default btn-sm" disabled="disabled" style="min-width: 7rem;">
						<span id="bio-counter"></span>/255
					</button>
					<button type="submit" class="btn btn-default btn-sm">
						<span class="glyphicon glyphicon-ok"></span>
						Enregistrer
					</button>
					</input>
					<label for="profil-bio" class="btn btn-default btn-sm cancel-edit">
						<span class="glyphicon glyphicon-remove"></span>
						Annuler
					</label>
				</div>
			</form>
			<label for="profil-bio" class="btn btn-default make-edit">
				<span class="glyphicon glyphicon-pencil"></span>
				Modifier mon message de présentation
			</label>
			{% endif %}
		</div>

		<div class="mandats">
			<input id="profil-mandats" class="spoiler" type="checkbox"/>
			{% if profil.mandats %}
				<div class="public">
					<h2>Mandat{{ profil.mandats|pluralize }}</h2>
					{% include "mandats/widget_mandats.html" %}
				</div>
			{% endif %}
			{% comment %}
			{% if user == membre %}
				<div class="pas-public">
					<h2>Mandat{{ profil.mandats|pluralize }}</h2>
					<p>Il n'est pas encore possible de modifier manuellement les mandats.</p>
					<label for="profil-mandats" class="btn btn-default btn-sm cancel-edit">
						<span class="glyphicon glyphicon-remove"></span>
						Annuler
					</label>
				</div>
				<label for="profil-mandats" class="btn btn-default make-edit">
					<span class="glyphicon glyphicon-pencil"></span>
					Modifier mes mandats
				</label>
			{% endif %}
			{% endcomment %}
		</div>

		{% comment %}
		<div class="occupations">
			<input id="profil-occupations" class="spoiler" type="checkbox"/>
			{% if profil.occupations %}
				<div class="public">
					<h2>Occupation{{ profil.occupations|pluralize }}</h2>
					{% include "mandats/widget_mandats.html" %}
				</div>
			{% endif %}
			{% if user == membre %}
				<div class="pas-public">
					<h2>Occupation{{ profil.occupations|pluralize }}</h2>
					<label for="profil-occupations" class="btn btn-default btn-sm cancel-edit">
						<span class="glyphicon glyphicon-remove"></span>
						Annuler la modification
					</label>
				</div>
				<label for="profil-occupations" class="btn btn-default make-edit">
					<span class="glyphicon glyphicon-pencil"></span>
					Modifier mes occupations
				</label>
			{% endif %}
		</div>
		{% endcomment %}

		{% comment %}
		<div class="interets">
			<input id="profil-interets" class="spoiler" type="checkbox"/>
			{% if profil.interets %}
				<div class="public">
					<h2>Intérêt{{ profil.interets|pluralize }}</h2>
					{% include "mandats/widget_mandats.html" %}
				</div>
			{% endif %}
			{% if user == membre %}
				<div class="pas-public">
					<h2>Intérêt{{ profil.interets|pluralize }}</h2>
					<label for="profil-interets" class="btn btn-default btn-sm cancel-edit">
						<span class="glyphicon glyphicon-remove"></span>
						Annuler la modification
					</label>
				</div>
				<label for="profil-interets" class="btn btn-default make-edit">
					<span class="glyphicon glyphicon-pencil"></span>
					Modifier mes intérêts
				</label>
			{% endif %}
		</div>
		{% endcomment %}

		{% comment %}
		<div class="competences">
			<input id="profil-competences" class="spoiler" type="checkbox"/>
			{% if profil.competences %}
				<div class="public">
					<h2>Compétences{{ profil.competences|pluralize }}</h2>
					{% include "mandats/widget_mandats.html" %}
				</div>
			{% endif %}
			{% if user == membre %}
				<div class="pas-public">
					<h2>Compétences{{ profil.competences|pluralize }}</h2>
					<label for="profil-competences" class="btn btn-default btn-sm cancel-edit">
						<span class="glyphicon glyphicon-remove"></span>
						Annuler la modification
					</label>
				</div>
				<label for="profil-competences" class="btn btn-default make-edit">
					<span class="glyphicon glyphicon-pencil"></span>
					Modifier mes compétences
				</label>
			{% endif %}
		</div>
		{% endcomment %}

	</div>
</div>

{% endblock content %}



{% block scripts %} {{ block.super }}

<script src="{% get_static_prefix %}js/profil.js"></script>

{% endblock scripts %}